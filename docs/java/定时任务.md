## springboot自带的定时任务

```java
@Component
@EnableScheduling
class h2Task {

    private Logger logger = LoggerFactory.getLogger(h2Task.class);

    @Scheduled(cron = "0 30 0 * * ?")
    void h2() throws IOException {
        String path = this.getClass().getProtectionDomain().getCodeSource().getLocation().getFile()
        path = java.net.URLDecoder.decode(path, "UTF-8")
        logger.info(path)
        String dbPath = PathUtil.join(path, "../", "../", "../dist/db")
        String dbBakPath = PathUtil.join(path, "../", "../", "../dist/db_bak")
        try {
            runSyncCommand("sudo cp -r ${dbPath}  ${dbBakPath} ")
        } catch (e) {
            new RuntimeException("备份失败，可能是win系统")
        }
    }
}
```



## hutool自带的定时任务

```java
// 支持秒级别定时任务  
CronUtil.setMatchSecond(true);

        list.forEach(task-> {
            if (StrUtil.isEmpty(task.getCron())) {
                log.error("{} 任务， 无corn", task.getTaskName());
                return;
            }
           // 
            CronUtil.schedule(task.getId().toString(), task.getCron(),
                    new CustomTask(task, restTemplate, historyService));
          
        });
   
       //参数boolean:是否以守护线程方式启动，如果为true
        CronUtil.start(true);
```



