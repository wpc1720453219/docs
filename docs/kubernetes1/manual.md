# Dashboard截图及功能说明

## 登录界面

选择第二个令牌，填入一个很长的token。

![1559530887521](./images/1559530887521.png)

## 主界面

默认跳转到`default`命名空间的概况。

![1559531018353](./images/1559531018353.png)

点击命令空间的那个下拉框切换命名空间

![1559531085552](./images/1559531085552.png)

## 集群界面

![1559531133395](./images/1559531133395.png)

### 命名空间`namespace`

![1559531151887](./images/1559531151887.png)

### 节点`node`

一个节点`node`代表一台主机

![1559531176565](./images/1559531176565.png)

其中一个节点的详情信息

![1559531225056](./images/1559531225056.png)

这个节点上面正在跑着的容器

![1559531250019](./images/1559531250019.png)

## 工作概况

接下来以`luna-dev`命名空间做示例

![1559531314570](./images/1559531314570.png)

### 部署`Deployment`

无状态应用就使用`deployment`作为`pod`的管理，k8s里面还是比较适合部署无状态应用，一些需要不断的把一些东西保存到硬盘的，如jenkins、nexus、数据库、es等，并不适合在k8s里面部署。

k8s主要提供的功能是，应用挂掉恢复、应用多实例自动部署，内部的ip、运行所在的机器并不固定，是随意找有资源的地方漂的。

![1559531405351](./images/1559531405351.png)

![1559531795621](./images/1559531795621.png)

点伸缩改变这个部署的实例数量。

![1559531822830](./images/1559531822830.png)

点编辑，spec.template.metadata.labels.config，改变这个label，可以重启这个部署的所有容器。

当然，上面的那个伸缩到0，也是可以的。

![1559531878668](./images/1559531878668.png)

### 容器组`Pod`

容器组也就是`pod`，pod和实际运行的容器绑定。

![1559532016159](./images/1559532016159.png)

pod详情

比如usercore，使用了这两个镜像

![1559532120582](./images/1559532120582.png)

### 副本集`ReplicaSet`

`deployment`控制的是副本集`ReplicaSet`，副本集按`pod`的模板，生成相应数量的`pod`

![1559532203946](./images/1559532203946.png)

副本集详情

比如一个副本集下有两个容器组

![1559532462960](./images/1559532462960.png)

### 有状态的副本集`StatefulSet`

这里es使用了有状态的副本集，有状态的副本集对下面的pod可以产生一对一的域名及ip用来访问，是service级别的。

![1559532532773](./images/1559532532773.png)

![1559532649571](./images/1559532649571.png)

## 服务发现与负载均衡

### 服务`Service`

服务的主要作用是，为集群内服间的相互访问提供域名，为集群外部的访问映射端口。

![1559532937328](./images/1559532937328.png)

这个是luna前端的项目，可以通过这个端口访问。

![1559533044191](./images/1559533044191.png)

## 配置与存储

![1559533137487](./images/1559533137487.png)

### 配置字典`ConfigMap`

主要写些环境上的配置，供部署使用。

![1559533163712](./images/1559533163712.png)

![1559533232206](./images/1559533232206.png)

### 保密字典`Secret`

对配置内容进行了加密

![1559533277218](./images/1559533277218.png)

这个是docker镜像私服的登录信息示例

![1559533290533](./images/1559533290533.png)
